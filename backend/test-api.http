### Backend API Testing
### Use this file with REST Client extension in VS Code
### Or use curl commands in terminal

@baseUrl = http://localhost:3000/api/v1
@token = your_token_here

### Health Check
GET http://localhost:3000/health

### Register New User
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "consent_for_research": false,
  "preferences": {
    "session_length": "medium",
    "notifications_enabled": true
  }
}

### Login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### Start Check-in Session
POST {{baseUrl}}/session/start
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "session_type": "check-in",
  "mood_score": 5,
  "initial_message": "I've been feeling anxious about work lately.",
  "consent_for_deep_exploration": true
}

### Start Gentle Deep Session
POST {{baseUrl}}/session/start
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "session_type": "gentle_deep",
  "mood_score": 4,
  "initial_message": "I keep thinking I'm a failure.",
  "consent_for_deep_exploration": true
}

### Send Message in Session
POST {{baseUrl}}/session/{{session_id}}/message
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "message_text": "I keep thinking I'm not good enough.",
  "timestamp": "2024-01-15T10:31:00Z"
}

### Test Safety Detection (High Risk)
POST {{baseUrl}}/session/{{session_id}}/message
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "message_text": "I want to kill myself.",
  "timestamp": "2024-01-15T10:32:00Z"
}

### Pause Session
POST {{baseUrl}}/session/{{session_id}}/pause
Authorization: Bearer {{token}}

### Resume Session
POST {{baseUrl}}/session/{{session_id}}/resume
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "resume_token": "resume_abc123"
}

### End Session
POST {{baseUrl}}/session/{{session_id}}/end
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "rating": 5,
  "feedback": "This session was really helpful."
}

### Get Session Summary
GET {{baseUrl}}/session/{{session_id}}/summary
Authorization: Bearer {{token}}

### List Sessions
GET {{baseUrl}}/session?limit=20&offset=0
Authorization: Bearer {{token}}

### List Journal Entries
GET {{baseUrl}}/journal/entries?limit=20&offset=0
Authorization: Bearer {{token}}

### Get Journal Entry
GET {{baseUrl}}/journal/entry/{{session_id}}
Authorization: Bearer {{token}}

### Submit Mood Score
POST {{baseUrl}}/analytics/mood
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "mood_score": 6,
  "timestamp": "2024-01-15T10:00:00Z",
  "notes": "Feeling better today"
}

### Get Mood History
GET {{baseUrl}}/analytics/mood?start_date=2024-01-01&end_date=2024-01-31
Authorization: Bearer {{token}}

### Get Progress Summary
GET {{baseUrl}}/analytics/progress
Authorization: Bearer {{token}}

### Get Crisis Resources
GET {{baseUrl}}/safety/resources?country=US&region=CA
Authorization: Bearer {{token}}

### Submit Safety Check-in
POST {{baseUrl}}/safety/check-in
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "session_id": "{{session_id}}",
  "safety_status": "safe",
  "message": "I'm feeling better now, thank you for checking in."
}
